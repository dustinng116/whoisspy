<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<div class="app-container">

    @if (!joined()) {
    <div class="screen-home-modern fade-in">
        <div class="login-card">
            <div class="top-decoration"></div>
            <div class="logo-wrapper">
                <div class="logo-icon"><span class="material-symbols-rounded">person_search</span></div>
            </div>
            <h1 class="app-title">Ai l√† <span class="highlight">GI√ÅN ƒêI·ªÜP?</span></h1>
            <p class="app-subtitle">Nh·∫≠p t√™n v√† b·∫Øt ƒë·∫ßu ngay!</p>

            <div class="form-group">
                <label>BI·ªÜT DANH</label>
                <div class="input-wrapper">
                    <span class="input-icon material-symbols-rounded">face</span>
                    <input [ngModel]="playerName()" (ngModelChange)="onNameInput($event)"
                        [class.input-error]="isNameError()" placeholder="Nh·∫≠p t√™n..." />
                </div>
            </div>

            @if (viewMode() === 'home') {
            <div class="action-buttons">
                <button class="btn-modern-primary" (click)="createRoom()">
                    <span class="material-symbols-rounded">add_circle</span> T·∫†O PH√íNG
                </button>
                <button class="btn-modern-dark" (click)="viewMode.set('join_input')">
                    <span class="material-symbols-rounded">login</span> THAM GIA
                </button>
            </div>
            } @else {
            <div class="form-group room-input-group fade-in">
                <label>M√É PH√íNG</label>
                <div class="input-wrapper">
                    <span class="input-icon material-symbols-rounded">meeting_room</span>
                    <input type="text" placeholder="Nh·∫≠p m√£ ph√≤ng..." [value]="joinRoomInput()"
                        (input)="onRoomInput($event)" [class.input-error]="isRoomError()" autofocus />
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn-modern-primary" [disabled]="joinRoomInput().length !== 8" (click)="joinRoom()">
                    V√ÄO NGAY
                </button>
                <button class="btn-text-only" (click)="viewMode.set('home')">‚Üê Quay l·∫°i</button>
            </div>
            }
        </div>
    </div>
    }

    @if (joined()) {

    @if (showWord()) {
    <div class="screen-lobby fade-in">
        <ng-container *ngTemplateOutlet="headerTpl"></ng-container>

        <div class="lobby-scroll-container">
            <main class="lobby-main centered-vertical">
                <div class="secret-card-container">
                    <div class="secret-card">
                        <div class="top-bar"></div>
                        <h3 class="card-title">T·ª´ b√≠ m·∫≠t c·ªßa b·∫°n l√†:</h3>
                        <div class="reveal-box" [class.revealed]="isWordVisible()" (click)="toggleWordVisibility()">
                            @if (!isWordVisible()) {
                            <div class="icon-circle"><span class="material-symbols-rounded">visibility_off</span></div>
                            <span class="action-text">B·∫•m ƒë·ªÉ xem</span>
                            } @else {
                            <span class="the-word">{{ myWord() }}</span>
                            <span class="sub-text">(B·∫•m ƒë·ªÉ ·∫©n)</span>
                            }
                        </div>
                        <p class="security-note">Gi·ªØ b√≠ m·∫≠t! ƒê·ª´ng ƒë·ªÉ ng∆∞·ªùi kh√°c nh√¨n th·∫•y.</p>
                    </div>
                </div>
            </main>
        </div>

        <div class="lobby-footer">
            <div class="footer-content">
                <div class="footer-left">
                    <button class="btn-round-box exit" (click)="openExitConfirm()" title="Tho√°t ph√≤ng">
                        <span class="material-symbols-rounded">logout</span>
                    </button>
                </div>
                <div class="footer-right">
                    <button class="btn-start-pill green-gradient" (click)="acknowledgeRole()">
                        <span>XONG</span>
                        <span class="material-symbols-rounded filled">check_circle</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    }

    @else {
    <div class="screen-lobby fade-in">

        <ng-container *ngTemplateOutlet="headerTpl"></ng-container>

        <div class="lobby-scroll-container">
            <main class="lobby-main">

                @if (isLobby()) {
                <div class="room-code-section">
                    <span class="section-label">M√É PH√íNG</span>
                    <div class="room-card">
                        <div class="room-content">
                            <h2 class="room-number">{{ roomId()?.slice(0,3) }} {{ roomId()?.slice(3) }}</h2>
                            <div class="room-actions">
                                <button class="btn-icon-soft" [class.copied]="isCopied()" (click)="copyRoomId()"
                                    [title]="isCopied() ? 'ƒê√£ sao ch√©p' : 'Sao ch√©p m√£'">
                                    <span class="material-symbols-rounded">{{ isCopied() ? 'check' : 'content_copy'
                                        }}</span>
                                </button>
                                <button class="btn-icon-soft" (click)="toggleQr(true)" title="QR">
                                    <span class="material-symbols-rounded">qr_code_2</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                }

                @if (isDiscussion()) {
                <div class="playing-info-section">
                    <div class="header-icon"><span class="material-symbols-rounded">record_voice_over</span></div>
                    <h2>ƒêang th·∫£o lu·∫≠n</h2>
                    <p class="sub-text">H√£y t√¨m ra k·∫ª gi·∫£ m·∫°o!</p>
                    <div class="action-pills">
                        <div class="pill dashed" (click)="toggleReviewKeyword()" [class.active]="isReviewingKeyword()">
                            <span class="icon-small">üîë</span>
                            <span class="text">{{ isReviewingKeyword() ? myWord() : 'Xem l·∫°i t·ª´ kh√≥a' }}</span>
                            <span class="eye-icon">{{ isReviewingKeyword() ? 'üôà' : 'üëÅÔ∏è' }}</span>
                        </div>
                        @if (!isEliminated()) {
                        <button class="pill solid-orange" (click)="openGuessModal()">
                            <span class="material-symbols-rounded icon-small">help</span>
                            <span>ƒêo√°n t·ª´ (Win ngay)</span>
                        </button>
                        }
                    </div>
                </div>
                }

                @if (isVoting()) {
                <div class="vote-timer-card fade-in">
                    <div class="progress-line"
                        [style.width.%]="(voteCountdown() / (room()?.config?.voteDuration || 15)) * 100"></div>
                    <div class="card-body">
                        <div class="time-display">
                            <div class="icon-circle"><span class="material-symbols-rounded">timer</span></div>
                            <span class="time-text">00:{{ voteCountdown() < 10 ? '0' + voteCountdown() : voteCountdown()
                                    }}</span>
                        </div>
                        <p class="hint-text">Ai l√† Gi√°n ƒëi·ªáp? <span class="highlight">H√£y b√¨nh ch·ªçn ngay!</span></p>
                    </div>
                </div>
                }

                <div class="grid-section">
                    @if (isLobby()) {
                    <div class="grid-header">
                        <h3>Ng∆∞·ªùi ch∆°i <span class="badge">{{ playerCount() }}/{{ MAX_PLAYERS }}</span></h3>
                        <span class="sub-text">{{ minRequiredPlayers() }}+ ƒê·ªÇ B·∫ÆT ƒê·∫¶U</span>
                    </div>
                    }
                    <div class="lobby-grid">
                        @for (slot of playersSlots(); track $index) {
                        @if (slot) {
                        <div class="lobby-card occupied" [class.is-host]="slot.id === room().hostId"
                            [class.selectable]="isVoting() && !isEliminated() && !slot.eliminated && slot.id !== playerId && slot.isOnline"
                            [class.selected]="selectedVoteId() === slot.id" [class.eliminated]="slot.eliminated"
                            [class.offline]="!slot.isOnline" [class.is-me]="slot.id === playerId"
                            [class.self-voting]="isVoting() && slot.id === playerId"
                            (click)="isVoting() ? selectForVote(slot.id) : onAvatarClick(slot)">

                            @if (selectedVoteId() === slot.id) { <div class="vote-check-overlay"><span
                                    class="material-symbols-rounded">check_circle</span></div> }
                            @if (slot.id === room().hostId) { <div class="host-badge"><span
                                    class="material-symbols-rounded">workspace_premium</span></div> }
                            @if (slot.id === playerId) { <div class="me-tag">B·∫†N</div> }
                            @if (isVoting() && getVoteDots(slot.id).length > 0) {
                            <div class="vote-dots-container">
                                @for(dot of getVoteDots(slot.id); track $index) { <span class="vote-dot"></span> }
                            </div>
                            }

                            <div class="avatar-wrapper">
                                <div class="avatar-display"
                                    [style.background-color]="slot.avatar ? 'transparent' : getAvatarColor(slot.name)">
                                    @if (slot.avatar) { <img [src]="'assets/avatars/' + slot.avatar"
                                        class="avatar-img" /> }
                                    @else { {{ slot.name.substring(0,2).toUpperCase() }} }
                                </div>
                                <div class="status-dot" [class.online]="slot.isOnline" [class.offline]="!slot.isOnline">
                                </div>
                            </div>

                            <div class="player-info">
                                <p class="p-name">{{ slot.name }}</p>
                                @if (!slot.isOnline) {
                                <div class="status-pill offline">OFFLINE</div>
                                }
                                @else if (slot.eliminated) {
                                <div class="status-pill dead">ƒê√É LO·∫†I</div>
                                }
                                @else if (isLobby()) {
                                <div class="status-pill">S·∫¥N S√ÄNG</div>
                                }
                            </div>
                        </div>
                        } @else {
                        <div class="lobby-card empty">
                            <div class="avatar-placeholder"><span class="material-symbols-rounded">person_add</span>
                            </div>
                            <p class="empty-text">ƒêANG CH·ªú</p>
                        </div>
                        }
                        }
                    </div>
                </div>
                <div class="footer-spacer"></div>
            </main>
        </div>

        <ng-container *ngTemplateOutlet="footerTpl"></ng-container>
    </div>
    }
    }

    <ng-template #headerTpl>
        <nav class="lobby-nav">
            <div class="nav-left">
                <div class="logo-box"><span class="material-symbols-rounded">person_search</span></div>
                <h1 class="logo-text">Ai l√† <span class="highlight">GI√ÅN ƒêI·ªÜP?</span></h1>
            </div>
            <div class="nav-right">
                <div class="user-pill"> 
                    <div class="avatar-circle">{{ playerName().substring(0,2).toUpperCase() }}</div>
                </div>
            </div>
        </nav>
    </ng-template>

    <ng-template #footerTpl>
        <div class="lobby-footer">
            <div class="footer-content">
                <div class="footer-left">
                    @if(isLobby()) {
                    <button class="btn-round-box settings" (click)="openSettings()"><span
                            class="material-symbols-rounded">settings</span></button>
                    }
                    <button class="btn-round-box exit" (click)="isLobby() ? exitGame() : openExitConfirm()">
                        <span class="material-symbols-rounded">logout</span>
                    </button>
                </div>
                <div class="footer-right">
                    @if (isLobby()) {
                    @if (isHost()) {
                    <button class="btn-start-pill" [disabled]="playerCount() < minRequiredPlayers()"
                        (click)="startGame()">
                        <span>B·∫ÆT ƒê·∫¶U</span> <span class="material-symbols-rounded filled">play_circle</span>
                    </button>
                    } @else {
                    <button class="btn-start-pill waiting" disabled><span>CH·ªú CH·ª¶...</span></button>
                    }
                    }
                    @if (isDiscussion()) {
                    @if (isHost()) {
                    <button class="btn-start-pill purple-gradient" (click)="startVoting()">
                        <span>B·∫ÆT ƒê·∫¶U VOTE</span> <span class="material-symbols-rounded filled icon-bolt">bolt</span>
                    </button>
                    } @else {
                    <button class="btn-start-pill waiting" disabled><span>ƒêANG TH·∫¢O LU·∫¨N...</span></button>
                    }
                    }
                    @if (isVoting()) {
                    @if (!isEliminated()) {
                    <button class="btn-start-pill green-gradient" [disabled]="!selectedVoteId()"
                        (click)="confirmVote()">
                        <span>X√ÅC NH·∫¨N</span> <span class="material-symbols-rounded filled">check_circle</span>
                    </button>
                    } @else {
                    <button class="btn-start-pill waiting" disabled><span>B·∫†N ƒê√É B·ªä LO·∫†I üíÄ</span></button>
                    }
                    }
                </div>
            </div>
        </div>
    </ng-template>

    @if (showQrModal()) {
    <div class="modal-backdrop fade-in" (click)="toggleQr(false)">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <h3>Qu√©t m√£ ƒë·ªÉ tham gia</h3>
            <div class="qr-container">
                @if (qrCodeUrl()) { <img [src]="qrCodeUrl()" alt="Room QR Code" /> }
            </div>
            <p class="room-hint">Ph√≤ng: <strong>#{{ roomId() }}</strong></p>
            <button class="btn-primary" (click)="toggleQr(false)">ƒê√≥ng</button>
        </div>
    </div>
    }

    @if (showDrawModal()) {
    <div class="modal-backdrop fade-in">
        <div class="modal-content result-modal">
            <div class="skull-icon">‚öñÔ∏è</div>
            <h1 class="eliminated-name" style="color: #f1c40f">H√íA VOTE</h1>
            <p>S·ªë phi·∫øu b·∫±ng nhau. Kh√¥ng ai b·ªã lo·∫°i!</p>
        </div>
    </div>
    }

    @if (showResultModal()) {
    <div class="modal-backdrop fade-in" (click)="isGameOver() ? null : closeResultModal()">
        <div class="modal-content result-modal" (click)="$event.stopPropagation()">
            @if (isGameOver()) {
            <div class="skull-icon">{{ winner() === 'spy' ? 'üèÜ' : randomEmoji() }}</div>
            <h3>K·∫æT TH√öC GAME</h3>
            <h1 class="eliminated-name" [style.color]="winner() === 'spy' ? '#ff4757' : '#0984e3'">
                {{ winner() === 'spy' ? 'GI√ÅN ƒêI·ªÜP TH·∫ÆNG' : 'D√ÇN TH∆Ø·ªúNG TH·∫ÆNG' }}
            </h1>
            <div class="reason-box">
                @if (endReason() === 'guessed_correct') { <p><strong>{{ heroName() }}</strong> ƒë√£ xu·∫•t s·∫Øc ƒëo√°n ƒë√∫ng t·ª´
                    kh√≥a!</p> }
                @else if (endReason() === 'guessed_wrong') { <p><strong>{{ heroName() }}</strong> ƒë√£ ƒëo√°n sai v√† "b√°o"
                    c·∫£ team! ü§£</p> }
                @else if (endReason() === 'not_enough_players') { <p style="color: #e67e22;">‚ö†Ô∏è Game b·ªã h·ªßy do kh√¥ng ƒë·ªß
                    ng∆∞·ªùi ch∆°i!</p> }
                @else if (endReason() === 'player_left') { <p>{{ winner() === 'spy' ? 'D√¢n th∆∞·ªùng' : 'Gi√°n ƒëi·ªáp' }} ƒë√£
                    b·ªè ch·∫°y!</p> }
                @else { <p>Gi√°n ƒëi·ªáp ƒë√£ b·ªã lo·∫°i h·∫øt!</p> }
            </div>
            <div class="spy-reveal-section">
                <p class="reveal-label">DANH T√çNH GI√ÅN ƒêI·ªÜP:</p>
                <div class="spy-list">
                    @for (spy of spiesList(); track $index) {
                    <div class="spy-card-mini">
                        <div class="avatar-mini" [style.background-color]="getAvatarColor(spy.name)">
                            {{ spy.name.substring(0,2).toUpperCase() }}
                        </div>
                        <span class="spy-name">{{ spy.name }}</span>
                    </div>
                    }
                </div>
            </div>
            @if (isHost()) { <button class="btn-primary mt-20" (click)="backToLobby()">üîÑ Ch∆°i v√°n m·ªõi</button> }
            @else { <p class="waiting-text">Ch·ªù ch·ªß ph√≤ng...</p> }
            } @else {
            <div class="skull-icon">‚ò†Ô∏è</div>
            <h3>NG∆Ø·ªúI B·ªä LO·∫†I</h3>
            <h1 class="eliminated-name">{{ room().game.revealedPlayer.id === playerId ? 'B·∫†N' :
                room().players[room().game.revealedPlayer.id]?.name }}</h1>
            @if(room().game.revealedPlayer.id === playerId){
            <div class="identity-box">
                L√†: <strong [class.spy]="room().game.revealedPlayer.role === 'spy'">
                    {{ room().game.revealedPlayer.role === 'spy' ? 'gI√ÅN ƒêI·ªÜP' : 'D√ÇN TH∆Ø·ªúNG' }}
                </strong>
            </div>
            }
            <button class="btn-primary mt-20" (click)="closeResultModal()">ƒê√≥ng (5s)</button>
            }
        </div>
    </div>
    }

    @if (showAvatarModal()) {
    <div class="modal-backdrop fade-in" (click)="showAvatarModal.set(false)">
        <div class="modal-content avatar-modal" (click)="$event.stopPropagation()">
            @if (previewAvatar()) {
            <div class="preview-mode fade-in">
                <h3>XEM TR∆Ø·ªöC</h3>
                <div class="preview-box"><img [src]="'assets/avatars/' + previewAvatar()" alt="Preview" /></div>
                <div class="action-row">
                    <button class="btn-white" (click)="backToList()">‚Üê Ch·ªçn h√¨nh kh√°c</button>
                    <button class="btn-primary" (click)="confirmAvatar()">X√°c nh·∫≠n ‚úì</button>
                </div>
            </div>
            } @else {
            <div class="list-mode fade-in">
                <h3>ƒê·ªîI AVATAR</h3>
                <p class="hint">Ch·ªçn m·ªôt h√¨nh ƒë·ªÉ xem tr∆∞·ªõc</p>
                <div class="avatar-list-grid">
                    @for (img of AVATAR_LIST; track $index) {
                    <div class="avatar-option small" (click)="openPreview(img)">
                        <img [src]="'assets/avatars/' + img" loading="lazy" />
                    </div>
                    }
                </div>
                <button class="btn-white mt-20" (click)="showAvatarModal.set(false)">ƒê√≥ng</button>
            </div>
            }
        </div>
    </div>
    }

    @if (viewingUser()) {
    <div class="modal-backdrop fade-in" (click)="closeViewUser()">
        <div class="modal-content avatar-view-modal" (click)="$event.stopPropagation()">
            <h3 class="user-name-title">{{ viewingUser().name }}</h3>
            <div class="preview-box large">
                @if (viewingUser().avatar) { <img [src]="'assets/avatars/' + viewingUser().avatar" alt="User Avatar" />
                }
                @else {
                <div class="fallback-avatar" [style.background-color]="getAvatarColor(viewingUser().name)">
                    {{ viewingUser().name.substring(0,2).toUpperCase() }}
                </div>
                }
            </div>
            <button class="btn-white mt-20" (click)="closeViewUser()">ƒê√≥ng</button>
        </div>
    </div>
    }

    @if (showSettingsModal()) {
    <div class="modal-backdrop fade-in" (click)="closeSettings()">
        <div class="modal-content settings-modal" (click)="$event.stopPropagation()">
            <h3>‚öôÔ∏è C√ÄI ƒê·∫∂T PH√íNG</h3>
            <div class="settings-form">
                <div class="config-section">
                    <label>‚è±Ô∏è Th·ªùi gian Vote:</label>
                    <div class="time-options">
                        @for (time of timeOptions; track time) {
                        <button class="btn-time" [class.active]="tempVoteDuration() === time"
                            (click)="tempVoteDuration.set(time)">{{ time }}s</button>
                        }
                    </div>
                </div>
                <div class="form-group">
                    <label>S·ªë l∆∞·ª£ng Gi√°n ƒêi·ªáp (Spy)</label>
                    <div class="select-wrapper">
                        <select [ngModel]="tempSpyCount()" (ngModelChange)="tempSpyCount.set(+$event)">
                            <option [value]="1">1 Spy (C·ªï ƒëi·ªÉn)</option>
                            <option [value]="2">2 Spies (ƒê√¥ng vui)</option>
                            <option [value]="3">3 Spies (H·ªón lo·∫°n)</option>
                        </select>
                    </div>
                    <p class="hint-text">L∆∞u √Ω: Ch·∫ø ƒë·ªô {{ tempSpyCount() }} Spy c·∫ßn √≠t nh·∫•t <strong>{{ tempMinRequired()
                            }} ng∆∞·ªùi ch∆°i</strong>.</p>
                </div>
                <div class="form-group row-between">
                    <label>Cho ph√©p ƒë·ªïi Vote?</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="voteChange" [ngModel]="tempAllowVoteChange()"
                            (ngModelChange)="tempAllowVoteChange.set($event)">
                        <label for="voteChange" class="slider"></label>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-white" (click)="closeSettings()">H·ªßy</button>
                @if (isHost()) { <button class="btn-primary" (click)="saveSettings()">L∆∞u C√†i ƒê·∫∑t</button> }
                @else { <button class="btn-primary" disabled>Ch·ªâ Host ch·ªânh ƒë∆∞·ª£c</button> }
            </div>
        </div>
    </div>
    }

    @if (isGuessing()) {
    <div class="modal-backdrop fade-in" (click)="closeGuessModal()">
        <div class="modal-content spy-modal" (click)="$event.stopPropagation()">
            <h3>üéØ QUY·∫æT ƒê·ªäNH T√ÅO B·∫†O</h3>
            <p style="font-size: 13px; color: #636e72;">
                B·∫°n s·∫Ω ƒëo√°n t·ª´ kh√≥a c·ªßa <strong>phe ƒë·ªëi th·ªß</strong>.<br>
                <span style="color: #ff4757; font-weight: bold;">C·∫¢NH B√ÅO:</span> N·∫øu ƒëo√°n SAI, phe b·∫°n s·∫Ω <strong
                    style="color: #ff4757">THUA NGAY L·∫¨P T·ª®C</strong>!
            </p>
            <input class="spy-input" placeholder="Nh·∫≠p t·ª´ kh√≥a..." [ngModel]="guessInput()"
                (ngModelChange)="guessInput.set($event)" autofocus />
            <div class="modal-actions">
                <button class="btn-white" (click)="closeGuessModal()">H·ªßy</button>
                <button class="btn-primary" (click)="submitGuess()">Ch·ªët ƒë∆°n</button>
            </div>
        </div>
    </div>
    }

    @if (showExitConfirm()) {
    <div class="modal-backdrop fade-in" (click)="closeExitConfirm()">
        <div class="modal-content confirm-modal" (click)="$event.stopPropagation()">
            <div class="icon-warning red">üõë</div>
            <h3>{{ isHost() ? 'GI·∫¢I T√ÅN PH√íNG?' : 'R·ªúI KH·ªéI GAME?' }}</h3>
            <p class="confirm-msg">
                @if (isHost()) { B·∫°n l√† ch·ªß ph√≤ng. N·∫øu b·∫°n tho√°t, ph√≤ng s·∫Ω b·ªã h·ªßy v√† t·∫•t c·∫£ ng∆∞·ªùi ch∆°i s·∫Ω b·ªã out. }
                @else { B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën tho√°t khi game ƒëang di·ªÖn ra kh√¥ng? }
            </p>
            <div class="modal-actions">
                <button class="btn-white" (click)="closeExitConfirm()">H·ªßy</button>
                <button class="btn-primary danger-btn" (click)="confirmExit()">{{ isHost() ? 'Gi·∫£i t√°n ngay' : 'Tho√°t
                    lu√¥n' }}</button>
            </div>
        </div>
    </div>
    }

    @if (showErrorModal()) {
    <div class="modal-backdrop fade-in" (click)="closeErrorModal()">
        <div class="modal-content error-modal" (click)="$event.stopPropagation()">
            <div class="icon-warning">‚ö†Ô∏è</div>
            <h3>R·∫§T TI·∫æC!</h3>
            <p class="error-msg">{{ errorMessage() }}</p>
            <button class="btn-primary mt-20" (click)="closeErrorModal()">ƒê√£ hi·ªÉu</button>
        </div>
    </div>
    }

    @if (showToast()) {
    <div class="toast-connection fade-in" [class.warning]="connectionStatus() === 'connecting'"
        [class.success]="connectionStatus() === 'connected'">
        @if (connectionStatus() === 'connecting') {
        <div class="spinner"></div> <span>ƒêang c·ªë g·∫Øng k·∫øt n·ªëi...</span>
        } @else {
        <span class="icon">üü¢</span> <span>ƒê√£ k·∫øt n·ªëi l·∫°i m·∫°ng!</span>
        }
    </div>
    }
</div>